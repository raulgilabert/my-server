<!DOCTYPE html>
<html>
	<head>
		<title>Calendar</title>
        <link rel="stylesheet" href="{{ static_url('css/web.css')}}">
        <script type="text/javascript" src="{{ static_url('js/calendar.js')}}"></script>
	</head>
	<body>
		<img src=" {{ static_url('images/flecha.png') }} " id="button_1" height="32px" onclick="back(month={{month}}, year={{year}})">
		<img src=" {{ static_url('images/flecha.png') }} " id="button_2" height="32px" onclick="next(month={{month}}, year={{year}})">

		<h1 align="center">{{ month_name }} de {{ year }}</h1>

		{% if days_blank == 1 %}
			<div id='blank'></div>

		{% else %}
			{% for r in range(1, days_blank - 1) %}
				<div id='blank'></div>
			{% end %}
		{% end %}

		{% if month in month_31 %}
			{% for x in range(1, 32) %}
				{% if x < datetime.day %}
					{% if month == datetime.month %}
						<div id="past"> 
							{{ x }} 

							{% try %}
								{% for event in events[str(year)][str(month)][str(x)] %}
									<div id="event">
										<p> {{ event["name"] }}

										<br>
				
										{{ event["duration"]["init"] }} : {{ event["duration"]["final"] }}</p>


									</div>
								{% end %}
							{% except %}

							{% end %}
						</div>
					{% end %}


				{% elif x == datetime.day %}
					{% if datetime.month == month %}
						<div id="now"> {{ x }} 

							{% try %}
								{% for event in events[str(year)][str(month)][str(x)] %}
									<div id="event">
										<p> {{ event["name"] }}

										<br>
				
										{{ event["duration"]["init"] }} : {{ event["duration"]["final"] }}</p>


									</div>
								{% end %}
							{% except %}

							{% end %}
						</div>
					{% end %}
				{% end %}

				{% if x > datetime.day or month != datetime.month %}
					<div id="future"> {{ x }} 

						{% try %}
							{% for event in events[str(year)][str(month)][str(x)] %}
								<div id="event">
									<p> {{ event["name"] }}

									<br>
			
									{{ event["duration"]["init"] }} : {{ event["duration"]["final"] }}</p>


								</div>
							{% end %}
						{% except %}

						{% end %}
					</div>

				{% end %}
			{% end %}

		{% elif month == 2 %}
			{% for x in range(1, 29) %}
				{% if x < datetime.day %}
					{% if month == datetime.month %}
						<div id="past"> 
							{{ x }} 

							{% try %}
								{% for event in events[str(year)][str(month)][str(x)] %}
									<div id="event">
										<p> {{ event["name"] }}

										<br>
				
										{{ event["duration"]["init"] }} : {{ event["duration"]["final"] }}</p>


									</div>
								{% end %}
							{% except %}

							{% end %}
						</div>
					{% end %}


				{% elif x == datetime.day %}
					{% if datetime.month == month %}
						<div id="now"> {{ x }} 

							{% try %}
								{% for event in events[str(year)][str(month)][str(x)] %}
									<div id="event">
										<p> {{ event["name"] }}

										<br>
				
										{{ event["duration"]["init"] }} : {{ event["duration"]["final"] }}</p>


									</div>
								{% end %}
							{% except %}

							{% end %}
						</div>
					{% end %}
				{% end %}

				{% if x > datetime.day or month != datetime.month %}
					<div id="future"> {{ x }} 

						{% try %}
							{% for event in events[str(year)][str(month)][str(x)] %}
								<div id="event">
									<p> {{ event["name"] }}

									<br>
			
									{{ event["duration"]["init"] }} : {{ event["duration"]["final"] }}</p>


								</div>
							{% end %}
						{% except %}

						{% end %}
					</div>

				{% end %}
			{% end %}

		{% else %}
			{% for x in range(1, 31) %}
				{% if x < datetime.day %}
					{% if month == datetime.month %}
						<div id="past"> 
							{{ x }} 

							{% try %}
								{% for event in events[str(year)][str(month)][str(x)] %}
									<div id="event">
										<p> {{ event["name"] }}

										<br>
				
										{{ event["duration"]["init"] }} : {{ event["duration"]["final"] }}</p>


									</div>
								{% end %}
							{% except %}

							{% end %}
						</div>
					{% end %}


				{% elif x == datetime.day %}
					{% if datetime.month == month %}
						<div id="now"> {{ x }} 

							{% try %}
								{% for event in events[str(year)][str(month)][str(x)] %}
									<div id="event">
										<p> {{ event["name"] }}

										<br>
				
										{{ event["duration"]["init"] }} : {{ event["duration"]["final"] }}</p>


									</div>
								{% end %}
							{% except %}

							{% end %}
						</div>
					{% end %}
				{% end %}

				{% if x > datetime.day or month != datetime.month %}
					<div id="future"> {{ x }} 

						{% try %}
							{% for event in events[str(year)][str(month)][str(x)] %}
								<div id="event">
									<p> {{ event["name"] }}

									<br>
			
									{{ event["duration"]["init"] }} : {{ event["duration"]["final"] }}</p>


								</div>
							{% end %}
						{% except %}

						{% end %}
					</div>

				{% end %}
			{% end %}
		{% end %}

	</body>
</html>